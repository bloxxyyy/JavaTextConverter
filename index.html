<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<link href="textconverter.css" rel="stylesheet">
	<title>Text converter</title>
</head>

<body>
	<h1>Text Converter</h1>
	<p>Fill in your text here:</p>
    <form action="http://localhost:8081/caseConv/Conv/" method="post" id="form">
        <textarea rows="6" cols="50" maxlength="1000" name="input" required=""></textarea><br>
		<label title="ALL CAPS"><input type="radio" name="format" value="caps" checked> All Caps</label><br>
		<label title="AlTeRnAtInG cAsE)"><input type="radio" name="format" value="altcase"> Alternating Case</label><br>
		<label title="iNvErTeD aLtErNaTiNg CaSe"><input type="radio" name="format" value="invaltcase"> Inverted Alternating Case</label><br>
		<label title="ranDOM CAsE"><input type="radio" name="format" value="randomcase"> Random Case</label><br>
		<label title="1337$p34k"><input type="radio" name="format" value="leet"> Leetspeak</label><br>
		<label title="Angry. Case."><input type="radio" name="format" value="angrycase"> Angry Case</label><br>
		<br>
		<input type="submit" value="Submit!" style="font-size:20px;width:110px;height:30px;">
		<br>
    </form>
	<div id="resultbox" style="display: hidden; visibility: hidden;">
			<hr>
			<h2>Result</h2>
			<textarea rows="6" cols="50" maxlength="500" id="output" required=""></textarea>
			<br>
			<div class="tooltip">
				<button onclick="copyClipboard()" onmouseout="outFunc()" style="font-size:20px;width:120px;height:30px;">
				<span class="tooltiptext" id="clipTooltip">Copy to clipboard</span>
				Copy result</button>
			</div>
		</div>
		<script>
			onFormSubmit = function(event) {
				event.preventDefault();
				
				var form = document.forms['form'];
				var formData = "input=" + encodeURIComponent(form['input'].value) + "&format=" + encodeURIComponent(form['format'].value);
				var xhr = new XMLHttpRequest();
				
				xhr.onreadystatechange = function(event) {
					if (xhr.readyState === 4 && xhr.status === 200) {
						var resultbox = document.getElementById("resultbox");
						resultbox.style.display = "block";
						resultbox.style.visibility = "visible";
						
						document.getElementById("output").value = xhr.responseText;
					} else if (xhr.readyState === 4) {
						alert(xhr.responseText);
					}
				};
				
				xhr.open("POST", "http://localhost:8081/caseConv/Conv/");
				xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
				xhr.send(formData);
			};
			
			window.onload = function() {
				document.getElementById("form").onsubmit = onFormSubmit;
			};
			
			
			function copyClipboard() {
				var copyText = document.getElementById("output");
				copyText.select();
				copyText.setSelectionRange(0, 99999);
				document.execCommand("copy");
			  
				var tooltip = document.getElementById("myTooltip");
				tooltip.innerHTML = "Copied the text";
			}
			
			function outFunc() {
				var tooltip = document.getElementById("clipTooltip");
				tooltip.innerHTML = "Copy to clipboard";
			}
		</script>

</body>
</html>